{% extends "components/base.html" %}
{% load static %}

{% block body_class %}projects{% endblock %}

{% block content %}
<div class="container">

  {% include "components/title.html" with title="Editar Projeto" %}

  <form id="project-form" class="project-form" action="{% url 'update_project' project.id %}" method="POST"
    enctype="multipart/form-data">
    {% csrf_token %}

    <!-- Nome do projeto -->
     <div class="project-media">
      <div class="media-item">
        <label class="form-label" for="name">Nome do Projeto:</label>
        <input type="text" id="name" name="name" value="{{ form.name.value }}" required>
      </div><br>

      <!-- Link do projeto -->
      <div class="media-item">
        <label class="form-label" for="link_project">Link do Projeto:</label>
        <input type="text" id="link_project" name="link_project"
       value="{% if form.link_project.value %}{{ form.link_project.value }}{% endif %}">
      </div><br>
    </div><br>

    <!-- Descrição -->
    <label class="form-label" for="description">Descrição:</label>
    <textarea id="description" name="description" rows="4" required>{{ form.description.value }}</textarea><br>

    <!-- Tipo -->
    <label class="form-label" for="type">Tipo:</label>
    <select id="type" name="type" required>
      <option value="">Selecione o tipo</option>
      <option value="Destaques" {% if form.type.value == "Destaques" %}selected{% endif %}>Destaques</option>
      <option value="RPA" {% if form.type.value == "RPA" %}selected{% endif %}>RPA</option>
      <option value="Dados" {% if form.type.value == "Dados" %}selected{% endif %}>Dados</option>
      <option value="Sistemas" {% if form.type.value == "Sistemas" %}selected{% endif %}>Sistemas</option>
    </select><br>

    <!-- Ferramentas -->
    <label class="form-label">Ferramentas:</label>
    <div class="tools-checkboxes">
      {% for tool in tools %}
        <label>
          <input type="checkbox" name="tools" value="{{ tool.name|default:tool }}"
            {% if tool.name|default:tool in selected_tools %}checked{% endif %}>
          {{ tool.name|default:tool }}
        </label>
      {% endfor %}
    </div>

    <!-- Botão de atualizar -->
    <button type="submit" class="button">Atualizar Projeto</button>
  </form>

</div>
{% endblock %}

{% block extra_scripts %}
{{ block.super }}
<script src="{% static 'js/selected_tools.js' %}"></script>
<script src="{% static 'js/status_alert.js' %}"></script>
{% endblock %}
